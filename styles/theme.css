// Theme toggle: light <-> dark, persisted in localStorage

document.addEventListener("DOMContentLoaded", () => {
  const btn = document.getElementById("theme-toggle-btn");
  if (!btn) return;

  const THEME_KEY = "svt-theme";

  function applyTheme(theme) {
    const isDark = theme === "dark";
    document.body.classList.toggle("dark-theme", isDark);
    btn.textContent = isDark ? "Dark" : "Light";
    localStorage.setItem(THEME_KEY, theme);
  }

  // Initial theme â€“ from storage or prefers-color-scheme
  const stored = localStorage.getItem(THEME_KEY);
  if (stored === "dark" || stored === "light") {
    applyTheme(stored);
  } else if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
    applyTheme("dark");
  } else {
    applyTheme("light");
  }

  btn.addEventListener("click", () => {
    const current = document.body.classList.contains("dark-theme") ? "dark" : "light";
    const next = current === "dark" ? "light" : "dark";
    applyTheme(next);
  });
});
